(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{9489:function(e,s,l){Promise.resolve().then(l.bind(l,6510))},6510:function(e,s,l){"use strict";l.d(s,{default:function(){return i}});var t=l(7437),a=l(2265);function r(e){let{label:s,hint:l}=e;return(0,t.jsxs)("span",{className:"inline-flex items-center gap-2 text-sm font-medium text-slate-700",children:[s,l?(0,t.jsx)("span",{className:"inline-flex h-5 w-5 items-center justify-center rounded-full border border-slate-300 text-xs text-slate-500",title:l,"aria-label":l,children:"i"}):null]})}function n(e){let{initialValue:s}=e,[l,n]=(0,a.useState)(""),[i,d]=(0,a.useState)(""),[c,o]=(0,a.useState)(""),[x,m]=(0,a.useState)(""),[u,h]=(0,a.useState)("Законопроєкт"),[p,g]=(0,a.useState)("official"),[b,j]=(0,a.useState)(""),[f,N]=(0,a.useState)(""),[v,y]=(0,a.useState)(""),[w,C]=(0,a.useState)(""),[S,k]=(0,a.useState)({loading:!1,message:"",active:null}),[R,_]=(0,a.useState)(!1),E=f.trim(),M=/^https?:\/\/.+/i.test(E),O=!E||!M;async function U(){if(!f.trim()){k({loading:!1,message:"Вкажіть URL джерела.",active:null});return}k({loading:!0,message:"Перевірка джерела...",active:null});try{let e=await fetch("/api/validate-source?url=".concat(encodeURIComponent(f.trim()))),s=await e.json();k({loading:!1,message:s.message,active:s.active})}catch(e){k({loading:!1,message:"Не вдалося перевірити джерело.",active:!1})}}return(0,a.useEffect)(()=>{var e,l,t,a;s&&(n(s.title),d(s.summary),o(s.date),m(s.legalBasis),h(s.status),g(s.verificationStatus),j(null!==(t=null===(e=s.sources[0])||void 0===e?void 0:e.name)&&void 0!==t?t:""),N(null!==(a=null===(l=s.sources[0])||void 0===l?void 0:l.url)&&void 0!==a?a:""),y(s.keyChanges.join("\n")),C(s.seoKeywords.join(", ")),k({loading:!1,message:"",active:null}),_(!1))},[s]),(0,t.jsxs)("section",{className:"rounded-2xl bg-white p-5 shadow-soft",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-slate-900",children:"Редактор оновлення"}),(0,t.jsx)("p",{className:"mt-2 text-sm text-slate-600",children:"Заповнюйте поля послідовно. Підказки біля полів допоможуть уникнути типових помилок."}),(0,t.jsxs)("div",{className:"mt-4 grid gap-4",children:[(0,t.jsxs)("label",{className:"grid gap-2",children:[(0,t.jsx)(r,{label:"Заголовок"}),(0,t.jsx)("input",{value:l,onChange:e=>n(e.target.value),className:"rounded-lg border border-slate-300 px-3 py-2"})]}),(0,t.jsxs)("label",{className:"grid gap-2",children:[(0,t.jsx)(r,{label:"Короткий опис"}),(0,t.jsx)("textarea",{value:i,onChange:e=>d(e.target.value),className:"min-h-[90px] rounded-lg border border-slate-300 px-3 py-2"})]}),(0,t.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,t.jsxs)("label",{className:"grid gap-2",children:[(0,t.jsx)(r,{label:"Дата"}),(0,t.jsx)("input",{type:"date",value:c,onChange:e=>o(e.target.value),className:"rounded-lg border border-slate-300 px-3 py-2"})]}),(0,t.jsxs)("label",{className:"grid gap-2",children:[(0,t.jsx)(r,{label:"Статус",hint:"Набрав чинності: новина видима для всіх. Законопроєкт: матеріал публікується з позначкою Draft."}),(0,t.jsxs)("select",{value:u,onChange:e=>h(e.target.value),className:"rounded-lg border border-slate-300 px-3 py-2",children:[(0,t.jsx)("option",{value:"Набрав чинності",children:"Набрав чинності"}),(0,t.jsx)("option",{value:"Прийнятий",children:"Прийнятий"}),(0,t.jsx)("option",{value:"Законопроєкт",children:"Законопроєкт"})]})]})]}),(0,t.jsxs)("label",{className:"grid gap-2",children:[(0,t.jsx)(r,{label:"Правова основа",hint:"Вкажіть формальний ідентифікатор акта, наприклад: Закон №1234."}),(0,t.jsx)("input",{value:x,onChange:e=>m(e.target.value),className:"rounded-lg border border-slate-300 px-3 py-2"})]}),(0,t.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,t.jsxs)("label",{className:"grid gap-2",children:[(0,t.jsx)(r,{label:"Назва джерела"}),(0,t.jsx)("input",{value:b,onChange:e=>j(e.target.value),className:"rounded-lg border border-slate-300 px-3 py-2"})]}),(0,t.jsxs)("label",{className:"grid gap-2",children:[(0,t.jsx)(r,{label:"Direct URL",hint:"Для максимальної SEO-довіри використовуйте прямі посилання на zakon.rada.gov.ua."}),(0,t.jsx)("input",{value:f,onChange:e=>N(e.target.value),className:"rounded-lg border border-slate-300 px-3 py-2"}),O?(0,t.jsx)("span",{className:"text-sm text-amber-700",children:"Без офіційного посилання довіра користувачів знижується на 40%."}):null]})]}),(0,t.jsxs)("label",{className:"grid gap-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-slate-700",children:"Тип верифікації"}),(0,t.jsxs)("select",{value:p,onChange:e=>g(e.target.value),className:"rounded-lg border border-slate-300 px-3 py-2",children:[(0,t.jsx)("option",{value:"official",children:"official"}),(0,t.jsx)("option",{value:"unverified_media",children:"unverified_media"})]})]}),(0,t.jsxs)("label",{className:"grid gap-2",children:[(0,t.jsx)(r,{label:"Ключові зміни (кожен пункт з нового рядка)"}),(0,t.jsx)("textarea",{value:v,onChange:e=>y(e.target.value),className:"min-h-[120px] rounded-lg border border-slate-300 px-3 py-2"})]}),(0,t.jsxs)("label",{className:"grid gap-2",children:[(0,t.jsx)(r,{label:"SEO ключові слова (через кому)",hint:"Ці ключові слова допомагають користувачам знайти саме це оновлення через Google."}),(0,t.jsx)("input",{value:w,onChange:e=>C(e.target.value),className:"rounded-lg border border-slate-300 px-3 py-2"})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:U,className:"rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-semibold text-slate-800 hover:bg-slate-50",children:S.loading?"Перевіряємо...":"Валідувати джерело"}),S.message?(0,t.jsx)("span",{className:"text-sm ".concat(S.active?"text-emerald-700":"text-amber-700"),children:S.message}):null]}),(0,t.jsxs)("div",{className:"rounded-xl border border-blue-200 bg-blue-50 p-4 text-sm text-blue-900",children:['Ця новина з\'явиться у розділі "Останні зміни" та буде доступна 5000+ користувачам.',(0,t.jsxs)("label",{className:"mt-3 flex items-start gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:R,onChange:e=>_(e.target.checked),className:"mt-0.5"}),(0,t.jsx)("span",{children:"Підтверджую, що дані перевірені перед збереженням."})]})]}),(0,t.jsx)("button",{type:"button",onClick:function(){console.log("Draft payload:",{title:l,summary:i,date:c,legalBasis:x,status:u,verificationStatus:p,sources:[{name:b,url:f}],keyChanges:v.split("\n").map(e=>e.trim()).filter(Boolean),seoKeywords:w.split(",").map(e=>e.trim()).filter(Boolean)}),alert("Чернетку збережено локально (демо режим).")},disabled:!R,className:"rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:cursor-not-allowed disabled:opacity-50",children:"Зберегти зміни"})]})]})}function i(){let[e,s]=(0,a.useState)([]),[l,r]=(0,a.useState)(!0),[i,d]=(0,a.useState)(!1),[c,o]=(0,a.useState)("all"),[x,m]=(0,a.useState)(null),[u,h]=(0,a.useState)([]);(0,a.useEffect)(()=>{let e=!0;return async function(){r(!0),d(!1);try{let l=await fetch("/api/laws");if(!l.ok)throw Error("Failed to fetch laws.");let t=await l.json();e&&s(t)}catch(s){e&&d(!0)}finally{e&&r(!1)}}(),()=>{e=!1}},[]);let p=(0,a.useMemo)(()=>{let s=e.filter(e=>!u.includes(e.id));return"all"===c?s:s.filter(e=>e.status===c)},[e,c,u]),g=(0,a.useMemo)(()=>{let s=e.filter(e=>!u.includes(e.id)),l=s.filter(e=>"Законопроєкт"===e.status).length,t=s.length-l,a=s.filter(e=>"official"===e.verificationStatus).length,r=0===s.length?0:Math.round(a/s.length*100);return{total:s.length,drafts:l,active:t,reliability:r}},[e,u]);return(0,t.jsxs)("main",{className:"mx-auto w-full max-w-7xl px-4 py-10 sm:px-6 lg:py-14",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-slate-900 sm:text-4xl",children:"Адмін-панель контенту"}),(0,t.jsx)("p",{className:"mt-3 max-w-3xl text-slate-600",children:"Керування законодавчими оновленнями, перевірка джерел та базова аналітика інтересу аудиторії."}),(0,t.jsxs)("section",{className:"mt-6 grid gap-3 sm:grid-cols-4",children:[(0,t.jsxs)("div",{className:"rounded-xl bg-white p-4 shadow-soft",children:[(0,t.jsx)("p",{className:"text-sm text-slate-500",children:"Всього оновлень"}),(0,t.jsx)("p",{className:"mt-1 text-2xl font-bold text-slate-900",children:g.total})]}),(0,t.jsxs)("div",{className:"rounded-xl bg-white p-4 shadow-soft",children:[(0,t.jsx)("p",{className:"text-sm text-slate-500",children:"Активні норми"}),(0,t.jsx)("p",{className:"mt-1 text-2xl font-bold text-emerald-700",children:g.active})]}),(0,t.jsxs)("div",{className:"rounded-xl bg-white p-4 shadow-soft",children:[(0,t.jsx)("p",{className:"text-sm text-slate-500",children:"Законопроєкти"}),(0,t.jsx)("p",{className:"mt-1 text-2xl font-bold text-amber-700",children:g.drafts})]}),(0,t.jsxs)("div",{className:"rounded-xl bg-white p-4 shadow-soft",children:[(0,t.jsx)("p",{className:"text-sm text-slate-500",children:"Надійність джерел"}),(0,t.jsxs)("p",{className:"mt-1 text-2xl font-bold text-blue-700",children:[g.reliability,"%"]})]})]}),(0,t.jsxs)("section",{className:"mt-3 rounded-xl bg-white p-4 shadow-soft",children:[(0,t.jsx)("p",{className:"mb-2 text-sm text-slate-500",children:"Індикатор Source Reliability"}),(0,t.jsx)("div",{className:"h-2 w-full rounded-full bg-slate-200",children:(0,t.jsx)("div",{className:"h-2 rounded-full bg-blue-600",style:{width:"".concat(g.reliability,"%")}})})]}),(0,t.jsxs)("section",{className:"mt-3 rounded-xl border border-slate-200 bg-white p-4 shadow-soft",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:"Як читати аналітику"}),(0,t.jsxs)("ul",{className:"mt-3 space-y-2 text-sm text-slate-700",children:[(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"font-semibold",children:"Interest Rate:"})," це співвідношення кліків до переглядів (CTR). Якщо показник низький, варто зробити заголовок більш привабливим і конкретним."]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"font-semibold",children:"Source Reliability:"})," 100% досягається лише тоді, коли всі активні новини мають посилання на офіційні державні домени."]})]})]}),(0,t.jsxs)("section",{className:"mt-8 grid gap-6 lg:grid-cols-[1.3fr_0.9fr]",children:[(0,t.jsxs)("div",{className:"rounded-2xl bg-white p-5 shadow-soft",children:[(0,t.jsxs)("div",{className:"mb-4 flex flex-wrap items-center justify-between gap-3",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-slate-900",children:"Список оновлень"}),(0,t.jsxs)("select",{value:c,onChange:e=>o(e.target.value),className:"rounded-lg border border-slate-300 px-3 py-2 text-sm",children:[(0,t.jsx)("option",{value:"all",children:"Усі статуси"}),(0,t.jsx)("option",{value:"Набрав чинності",children:"Набрав чинності"}),(0,t.jsx)("option",{value:"Прийнятий",children:"Прийнятий"}),(0,t.jsx)("option",{value:"Законопроєкт",children:"Законопроєкт"})]})]}),l?(0,t.jsx)("p",{className:"text-slate-600",children:"Завантаження..."}):null,i?(0,t.jsx)("p",{className:"text-red-600",children:"Помилка завантаження даних."}):null,(0,t.jsx)("div",{className:"space-y-3",children:p.map(e=>(0,t.jsxs)("article",{className:"rounded-xl border border-slate-200 p-4",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,t.jsx)("h3",{className:"font-semibold text-slate-900",children:e.title}),(0,t.jsx)("span",{className:"text-xs text-slate-500",children:e.date})]}),(0,t.jsx)("p",{className:"mt-2 text-sm text-slate-600",children:e.summary}),(0,t.jsxs)("div",{className:"mt-3 grid gap-1 text-xs text-slate-500 sm:grid-cols-3",children:[(0,t.jsxs)("span",{children:["Clicks: ",e.metrics.clickCount]}),(0,t.jsxs)("span",{children:["Interest: ",(100*e.metrics.interestRate).toFixed(1),"%"]}),(0,t.jsxs)("span",{children:["Top: ",e.metrics.mostViewedCategory]})]}),(0,t.jsxs)("div",{className:"mt-3 flex flex-wrap gap-2",children:[(0,t.jsx)("button",{type:"button",onClick:()=>m(e),className:"rounded-lg border border-slate-300 bg-white px-3 py-1.5 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Редагувати"}),(0,t.jsx)("button",{type:"button",onClick:()=>{var s;return s=e.id,void(h(e=>[...e,s]),(null==x?void 0:x.id)===s&&m(null))},className:"rounded-lg border border-red-300 bg-white px-3 py-1.5 text-sm font-semibold text-red-700 hover:bg-red-50",children:"Видалити"})]})]},e.id))})]}),(0,t.jsx)(n,{initialValue:x})]}),(0,t.jsxs)("section",{className:"mt-8 rounded-2xl border border-slate-200 bg-white p-5 shadow-soft",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:"Admin Handbook"}),(0,t.jsxs)("ul",{className:"mt-3 space-y-2 text-sm",children:[(0,t.jsx)("li",{children:(0,t.jsx)("a",{href:"#",className:"text-brand-700 hover:underline",children:"Як правильно додавати нові закони"})}),(0,t.jsx)("li",{children:(0,t.jsx)("a",{href:"#",className:"text-brand-700 hover:underline",children:"Офіційні джерела для моніторингу (Rada, Customs, CMU)"})}),(0,t.jsx)("li",{children:(0,t.jsx)("a",{href:"#",className:"text-brand-700 hover:underline",children:"Контакти технічної підтримки"})})]})]})]})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=9489)}),_N_E=e.O()}]);